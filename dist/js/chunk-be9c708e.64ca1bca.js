(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-be9c708e"],{4029:function(e,t,a){},"811c":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("新增热门书籍")])]),a("el-form",{ref:"form",staticClass:"ml-15",attrs:{rules:e.rules,model:e.form,"label-position":"left","label-width":"150px"}},[a("el-form-item",{attrs:{label:"状态",prop:"status"}},[a("el-radio-group",{model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-radio",{attrs:{label:!0}},[e._v("批量导入")]),a("el-radio",{attrs:{label:!1}},[e._v("手动录入")])],1)],1),e.form.status?a("el-form-item",{attrs:{label:"上传excel文件",prop:"files"}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{name:"files",accept:".xlsx,.xls,.XLSX,.XLS",headers:e.headers,action:"/upload/","on-change":e.handleChange,"on-preview":e.handlePreview,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"auto-upload":!1,"http-request":e.uploadFile,drag:""},model:{value:e.form.files,callback:function(t){e.$set(e.form,"files",t)},expression:"form.files"}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或"),a("em",[e._v("点击上传")])]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传excel文件")])])],1):a("el-form-item",{attrs:{label:"bookVO",prop:"bookVO"}},[a("el-input",{staticStyle:{width:"3rem"},attrs:{placeholder:"bookVO"},model:{value:e.form.bookVO,callback:function(t){e.$set(e.form,"bookVO",t)},expression:"form.bookVO"}})],1),a("el-form-item",[a("el-button",{attrs:{loading:e.loading,type:"primary"},on:{click:e.onSubmit}},[e._v("上传")])],1)],1)],1)],1)},s=[],l=(a("b0c0"),a("8a79"),a("9f12")),r=a("53fe"),n=a("8b83"),i=a("c65a"),c=a("c03e"),u=a("9ab4"),d=a("6022"),f=function(){function e(){Object(l["a"])(this,e)}return Object(r["a"])(e,[{key:"name",value:function(e){return[{required:!0,message:"请输入".concat(e),trigger:"blur"},{max:100,message:"不能超过 100 个字符",trigger:"blur"},{min:2,message:"不能少于 2 个字符",trigger:"blur"},{pattern:"^([a-z])([a-z0-9_-]){1,99}$",message:"".concat(e,"需要以小写字母开头, 可包含小写字母, 数字, _和-, 并且长度在2-100之间."),trigger:"blur"}]}},{key:"getNoChinese",value:function(){return{pattern:"^([^一-龥]){6,20}$",message:"不能输入中文,长度6-20"}}},{key:"getNoEmpty",value:function(e){return{required:!0,message:"请输入".concat(e)}}},{key:"domainSelected",value:function(e){return[{required:!0,message:"请选择".concat(e),trigger:"blur"}]}}]),e}(),m=new f,p=a("60a3"),g=function(e){function t(){var e;return Object(l["a"])(this,t),e=Object(n["a"])(this,Object(i["a"])(t).apply(this,arguments)),e.form={status:!0,files:"",bookVO:""},e.loading=!1,e.headers={token:window.sessionStorage.getItem("access_token")},e.uploadForm=new FormData,e.rules={status:[m.getNoEmpty("状态")],files:[m.getNoEmpty("文件")],bookVO:[m.getNoEmpty("bookVO")]},e}return Object(c["a"])(t,e),Object(r["a"])(t,[{key:"uploadFile",value:function(e){this.uploadForm.append("img",e.file)}},{key:"onSubmit",value:function(){var e=this;this.$refs["form"].validate((function(t,a){console.log(e.form),t&&(e.loading=!0,e.form.status?(e.$refs["upload"].submit(),d["a"].getUploadBook(e.uploadForm).then((function(t){t&&200===t.code&&(e.$message({message:"上传成功",type:"success"}),e.loading=!1)})).catch((function(){e.loading=!1})),console.log(e.uploadForm,"this.uploadForm")):d["a"].getSaveBook(e.form).then((function(t){t&&200===t.code&&(e.loading=!1)})).catch((function(){e.loading=!1})),console.log(e.form))}))}},{key:"beforeAvatarUpload",value:function(e){var t=e.name;if(!t.endsWith(".xlsx")&&!t.endsWith(".xls")&&!t.endsWith(".XLSX")&&!t.endsWith(".XLS"))return this.$message({showClose:!0,message:"只能上传Excel文件",type:"error"}),!1}},{key:"handleSuccess",value:function(e,t,a){this.$refs["form"].clearValidate("files"),console.log(e,"res")}},{key:"handleChange",value:function(e,t){this.form.files=e}},{key:"handleRemove",value:function(e,t){}},{key:"handlePreview",value:function(e){}}]),t}(p["c"]);g=u["a"]([p["a"]],g);var b=g,h=b,v=(a("8a21"),a("2877")),k=Object(v["a"])(h,o,s,!1,null,null,null);t["default"]=k.exports},"8a21":function(e,t,a){"use strict";var o=a("4029"),s=a.n(o);s.a}}]);
//# sourceMappingURL=chunk-be9c708e.64ca1bca.js.map